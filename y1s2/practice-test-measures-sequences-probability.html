<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year 1 Maths - Measures, Sequences & Probability Practice Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #e0e7ff 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            padding: 2rem 3rem;
        }

        h1 {
            font-size: 2rem;
            color: #1e3a5f;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            text-align: center;
            color: #6366f1;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
        }

        .instructions {
            background: #fef3c7;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid #f59e0b;
        }

        .instructions h3 {
            color: #92400e;
            margin-bottom: 0.5rem;
        }

        .instructions p, .instructions li {
            color: #78350f;
            line-height: 1.6;
        }

        .instructions ul {
            margin-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .topic-section {
            margin-bottom: 2rem;
            border: 2px solid #e0e7ff;
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .topic-header {
            background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 1rem 1.5rem;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .topic-content {
            padding: 1.5rem;
        }

        .question {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 0.5rem;
            border-left: 4px solid #6366f1;
        }

        .question:last-child {
            margin-bottom: 0;
        }

        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .question-number {
            background: #4f46e5;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.8rem;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }

        .question-text {
            font-size: 1rem;
            color: #1f2937;
            line-height: 1.6;
            flex: 1;
        }

        .question-text code {
            background: #e0e7ff;
            padding: 0.1rem 0.4rem;
            border-radius: 0.25rem;
            font-family: monospace;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option:hover {
            border-color: #6366f1;
            background-color: #f5f3ff;
        }

        .option.selected {
            border-color: #4f46e5;
            background-color: #eef2ff;
        }

        .option.correct {
            border-color: #22c55e;
            background-color: #f0fdf4;
        }

        .option.incorrect {
            border-color: #ef4444;
            background-color: #fef2f2;
        }

        .option input[type="radio"] {
            margin-right: 0.75rem;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .option label {
            cursor: pointer;
            flex: 1;
        }

        .input-answer {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .input-answer input {
            padding: 0.5rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
            width: 150px;
            transition: border-color 0.2s;
        }

        .input-answer input:focus {
            outline: none;
            border-color: #6366f1;
        }

        .input-answer input.correct {
            border-color: #22c55e;
            background-color: #f0fdf4;
        }

        .input-answer input.incorrect {
            border-color: #ef4444;
            background-color: #fef2f2;
        }

        .input-answer span {
            color: #6b7280;
        }

        .feedback {
            margin-top: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.25rem;
            font-size: 0.9rem;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #dcfce7;
            color: #166534;
        }

        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
        }

        .submit-section {
            margin-top: 2rem;
            text-align: center;
        }

        .btn {
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
            margin: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(90deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(79, 70, 229, 0.4);
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #4b5563;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .results {
            display: none;
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            color: white;
            padding: 2rem;
            border-radius: 1rem;
            margin-top: 2rem;
            text-align: center;
        }

        .results.show {
            display: block;
        }

        .results h2 {
            font-size: 1.75rem;
            margin-bottom: 1rem;
        }

        .score {
            font-size: 3rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        .score-breakdown {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .score-item {
            background: rgba(255,255,255,0.2);
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            min-width: 120px;
        }

        .score-item-value {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .score-item-label {
            font-size: 0.85rem;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255,255,255,0.3);
            border-radius: 6px;
            margin: 1rem 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .table-question {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.75rem;
        }

        .table-question th, .table-question td {
            border: 2px solid #c7d2fe;
            padding: 0.5rem;
            text-align: center;
        }

        .table-question th {
            background: #e0e7ff;
            color: #3730a3;
        }

        .table-question input {
            width: 80px;
            padding: 0.25rem;
            border: 1px solid #d1d5db;
            border-radius: 0.25rem;
            text-align: center;
        }

        .sequence-display {
            font-family: monospace;
            font-size: 1.1rem;
            background: #f0f9ff;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            margin: 0.5rem 0;
            display: inline-block;
        }

        @media (max-width: 640px) {
            .container {
                padding: 1rem 1.5rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .score-breakdown {
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Year 1 Maths Practice Test</h1>
        <p class="subtitle">Measures, Sequences & Probability</p>

        <div class="instructions">
            <h3>Instructions:</h3>
            <ul>
                <li>Answer all questions below</li>
                <li>Use paper for working out calculations if needed</li>
                <li>Click "Submit Test" when you're finished to see your results</li>
                <li>You can retry the test as many times as you like</li>
            </ul>
        </div>

        <form id="test-form">
            <!-- SECTION 1: METRIC MEASURES -->
            <div class="topic-section">
                <div class="topic-header">Section A: Metric Measures</div>
                <div class="topic-content" id="section-measures"></div>
            </div>

            <!-- SECTION 2: PERIMETER & AREA -->
            <div class="topic-section">
                <div class="topic-header">Section B: Perimeter & Area</div>
                <div class="topic-content" id="section-area"></div>
            </div>

            <!-- SECTION 3: SEQUENCES -->
            <div class="topic-section">
                <div class="topic-header">Section C: Sequences</div>
                <div class="topic-content" id="section-sequences"></div>
            </div>

            <!-- SECTION 4: COORDINATES -->
            <div class="topic-section">
                <div class="topic-header">Section D: Coordinates & Midpoints</div>
                <div class="topic-content" id="section-coordinates"></div>
            </div>

            <!-- SECTION 5: PROBABILITY -->
            <div class="topic-section">
                <div class="topic-header">Section E: Probability</div>
                <div class="topic-content" id="section-probability"></div>
            </div>
        </form>

        <div class="submit-section">
            <button type="button" class="btn btn-primary" onclick="submitTest()">Submit Test</button>
            <button type="button" class="btn btn-secondary" onclick="resetTest()">Reset</button>
        </div>

        <div class="results" id="results">
            <h2>Test Complete!</h2>
            <div class="score" id="score-display"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p id="feedback-message"></p>
            <div class="score-breakdown" id="score-breakdown"></div>
            <button class="btn btn-secondary" onclick="resetTest()" style="margin-top: 1.5rem;">Try Again</button>
        </div>
    </div>

    <script>
        // Question data organized by section
        const questions = {
            measures: [
                { id: 'm1', question: '5 km = _____ m', answer: '5000', unit: 'm', type: 'input' },
                { id: 'm2', question: '450 mm = _____ cm', answer: '45', unit: 'cm', type: 'input' },
                { id: 'm3', question: '7.5 kg = _____ g', answer: '7500', unit: 'g', type: 'input' },
                { id: 'm4', question: '2400 g = _____ kg', answer: '2.4', unit: 'kg', type: 'input' },
                { id: 'm5', question: '3.25 m = _____ cm', answer: '325', unit: 'cm', type: 'input' },
                { id: 'm6', question: '9 m = _____ mm', answer: '9000', unit: 'mm', type: 'input' },
                { id: 'm7', question: '0.75 L = _____ ml', answer: '750', unit: 'ml', type: 'input' },
                { id: 'm8', question: '4500 ml = _____ L', answer: '4.5', unit: 'L', type: 'input' },
                { id: 'm9', question: '0.08 km = _____ m', answer: '80', unit: 'm', type: 'input' },
                { id: 'm10', question: '560 cm = _____ m', answer: '5.6', unit: 'm', type: 'input' },
                {
                    id: 'm11',
                    question: 'Which is the longest length?',
                    options: ['2500 mm', '3 m', '250 cm', '0.025 km'],
                    answer: '3 m',
                    type: 'mc'
                },
                {
                    id: 'm12',
                    question: 'Order these from shortest to longest: 4200 mm, 5 m, 380 cm, 0.045 km',
                    options: [
                        '380 cm, 4200 mm, 0.045 km, 5 m',
                        '4200 mm, 380 cm, 0.045 km, 5 m',
                        '380 cm, 4200 mm, 5 m, 0.045 km',
                        '0.045 km, 380 cm, 4200 mm, 5 m'
                    ],
                    answer: '380 cm, 4200 mm, 0.045 km, 5 m',
                    type: 'mc'
                }
            ],
            area: [
                {
                    id: 'a1',
                    question: 'A rectangle has length 8 cm and width 5 cm. What is its perimeter?',
                    answer: '26',
                    unit: 'cm',
                    type: 'input'
                },
                {
                    id: 'a2',
                    question: 'A rectangle has length 8 cm and width 5 cm. What is its area?',
                    answer: '40',
                    unit: 'cm²',
                    type: 'input'
                },
                {
                    id: 'a3',
                    question: 'A square has a perimeter of 36 cm. What is the length of one side?',
                    answer: '9',
                    unit: 'cm',
                    type: 'input'
                },
                {
                    id: 'a4',
                    question: 'A square has an area of 49 cm². What is the length of one side?',
                    answer: '7',
                    unit: 'cm',
                    type: 'input'
                },
                {
                    id: 'a5',
                    question: 'A rectangle has a perimeter of 30 cm. If its length is 9 cm, what is its width?',
                    answer: '6',
                    unit: 'cm',
                    type: 'input'
                },
                {
                    id: 'a6',
                    question: 'A rectangle has an area of 72 cm². If its length is 12 cm, what is its width?',
                    answer: '6',
                    unit: 'cm',
                    type: 'input'
                },
                {
                    id: 'a7',
                    question: 'An L-shaped figure is made from a 10 cm × 6 cm rectangle with a 4 cm × 3 cm rectangle removed. What is the remaining area?',
                    answer: '48',
                    unit: 'cm²',
                    type: 'input'
                },
                {
                    id: 'a8',
                    question: 'A compound shape is made of two rectangles: one is 5 m × 3 m, the other is 4 m × 2 m. What is the total area?',
                    answer: '23',
                    unit: 'm²',
                    type: 'input'
                },
                {
                    id: 'a9',
                    question: 'A rectangle has area 54 m² and width 6 m. What is its perimeter?',
                    options: ['15 m', '27 m', '30 m', '36 m'],
                    answer: '30 m',
                    type: 'mc'
                },
                {
                    id: 'a10',
                    question: 'A shape is made of two joined rectangles. Rectangle A is 8 m × 5 m. The total area is 56 m². Rectangle B has width 4 m. What is the length of Rectangle B?',
                    answer: '4',
                    unit: 'm',
                    type: 'input'
                }
            ],
            sequences: [
                {
                    id: 's1',
                    question: 'What is the next term in the sequence: 7, 13, 19, 25, ___?',
                    answer: '31',
                    type: 'input'
                },
                {
                    id: 's2',
                    question: 'What is the next term in the sequence: 2, 6, 18, 54, ___?',
                    answer: '162',
                    type: 'input'
                },
                {
                    id: 's3',
                    question: 'What is the missing term: 5.2, 4.8, ___, 4.0, 3.6?',
                    answer: '4.4',
                    type: 'input'
                },
                {
                    id: 's4',
                    question: 'What is the missing term: 3, 12, ___, 192, 768?',
                    answer: '48',
                    type: 'input'
                },
                {
                    id: 's5',
                    question: 'Is the sequence 4, 12, 36, 108 arithmetic or geometric?',
                    options: ['Arithmetic', 'Geometric'],
                    answer: 'Geometric',
                    type: 'mc'
                },
                {
                    id: 's6',
                    question: 'Is the sequence 15, 11, 7, 3, -1 arithmetic or geometric?',
                    options: ['Arithmetic', 'Geometric'],
                    answer: 'Arithmetic',
                    type: 'mc'
                },
                {
                    id: 's7',
                    question: 'The general term of a sequence is 4n + 3. What is the 1st term?',
                    answer: '7',
                    type: 'input'
                },
                {
                    id: 's8',
                    question: 'The general term of a sequence is 4n + 3. What is the 5th term?',
                    answer: '23',
                    type: 'input'
                },
                {
                    id: 's9',
                    question: 'The general term of a sequence is 6n - 5. What is the 10th term?',
                    answer: '55',
                    type: 'input'
                },
                {
                    id: 's10',
                    question: 'A sequence is: 8, 15, 22, 29, 36, ... What is the common difference?',
                    answer: '7',
                    type: 'input'
                },
                {
                    id: 's11',
                    question: 'A sequence is: 8, 15, 22, 29, 36, ... What is the general term (nth term)?',
                    options: ['7n + 1', '8n + 7', '7n + 8', 'n + 7'],
                    answer: '7n + 1',
                    type: 'mc'
                },
                {
                    id: 's12',
                    question: 'Using the sequence 8, 15, 22, 29, 36, ... what is the 50th term?',
                    answer: '351',
                    type: 'input'
                }
            ],
            coordinates: [
                {
                    id: 'c1',
                    question: 'What is the midpoint of (2, 4) and (6, 8)?',
                    options: ['(4, 6)', '(8, 12)', '(3, 4)', '(4, 12)'],
                    answer: '(4, 6)',
                    type: 'mc'
                },
                {
                    id: 'c2',
                    question: 'What is the midpoint of (-4, 2) and (2, -6)?',
                    options: ['(-1, -2)', '(-2, -4)', '(-1, 4)', '(3, 4)'],
                    answer: '(-1, -2)',
                    type: 'mc'
                },
                {
                    id: 'c3',
                    question: 'What is the midpoint of (0, 5) and (8, 5)?',
                    options: ['(4, 5)', '(4, 0)', '(8, 10)', '(0, 5)'],
                    answer: '(4, 5)',
                    type: 'mc'
                },
                {
                    id: 'c4',
                    question: 'The midpoint of points A and B is (3, 4). If A is (1, 2), what is point B?',
                    options: ['(5, 6)', '(2, 3)', '(4, 6)', '(2, 6)'],
                    answer: '(5, 6)',
                    type: 'mc'
                },
                {
                    id: 'c5',
                    question: 'In which quadrant is the point (-3, 5)?',
                    options: ['1st quadrant', '2nd quadrant', '3rd quadrant', '4th quadrant'],
                    answer: '2nd quadrant',
                    type: 'mc'
                },
                {
                    id: 'c6',
                    question: 'In which quadrant is the point (4, -2)?',
                    options: ['1st quadrant', '2nd quadrant', '3rd quadrant', '4th quadrant'],
                    answer: '4th quadrant',
                    type: 'mc'
                },
                {
                    id: 'c7',
                    question: 'A point lies on the x-axis at x = -5. What are its coordinates?',
                    options: ['(-5, 0)', '(0, -5)', '(-5, -5)', '(5, 0)'],
                    answer: '(-5, 0)',
                    type: 'mc'
                },
                {
                    id: 'c8',
                    question: 'A point lies on the y-axis at y = 3. What are its coordinates?',
                    options: ['(3, 0)', '(0, 3)', '(3, 3)', '(-3, 0)'],
                    answer: '(0, 3)',
                    type: 'mc'
                },
                {
                    id: 'c9',
                    question: 'What is the midpoint of (-6, -2) and (-2, -8)?',
                    options: ['(-4, -5)', '(-8, -10)', '(-4, 5)', '(4, 5)'],
                    answer: '(-4, -5)',
                    type: 'mc'
                },
                {
                    id: 'c10',
                    question: 'A rectangle has corners at (1, 1), (1, 5), (7, 5), and (7, 1). What is the coordinate of the center of the rectangle?',
                    options: ['(4, 3)', '(3, 4)', '(4, 4)', '(3, 3)'],
                    answer: '(4, 3)',
                    type: 'mc'
                }
            ],
            probability: [
                {
                    id: 'p1',
                    question: 'A fair 6-sided dice is rolled. What is P(rolling a 4)?',
                    options: ['1/6', '1/4', '4/6', '1/2'],
                    answer: '1/6',
                    type: 'mc'
                },
                {
                    id: 'p2',
                    question: 'A fair 6-sided dice is rolled. What is P(rolling an even number)?',
                    options: ['1/6', '1/3', '1/2', '2/3'],
                    answer: '1/2',
                    type: 'mc'
                },
                {
                    id: 'p3',
                    question: 'A fair 6-sided dice is rolled. What is P(rolling a number greater than 4)?',
                    options: ['1/6', '1/3', '1/2', '2/3'],
                    answer: '1/3',
                    type: 'mc'
                },
                {
                    id: 'p4',
                    question: 'A fair 6-sided dice is rolled. What is P(not rolling a 2)?',
                    options: ['1/6', '2/6', '5/6', '1/2'],
                    answer: '5/6',
                    type: 'mc'
                },
                {
                    id: 'p5',
                    question: 'A bag contains 4 red, 5 blue, and 3 green marbles. What is P(picking a blue marble)?',
                    options: ['5/12', '5/7', '1/3', '1/5'],
                    answer: '5/12',
                    type: 'mc'
                },
                {
                    id: 'p6',
                    question: 'A bag contains 4 red, 5 blue, and 3 green marbles. What is P(not picking a red marble)?',
                    options: ['4/12', '8/12', '1/3', '1/4'],
                    answer: '8/12',
                    type: 'mc'
                },
                {
                    id: 'p7',
                    question: 'A bag contains 4 red, 5 blue, and 3 green marbles. What is P(picking a yellow marble)?',
                    options: ['0', '1/12', '1', 'Cannot determine'],
                    answer: '0',
                    type: 'mc'
                },
                {
                    id: 'p8',
                    question: 'A spinner has sections: A (0.3), B (0.25), C (0.15), D (?). What is P(D)?',
                    options: ['0.2', '0.3', '0.35', '0.7'],
                    answer: '0.3',
                    type: 'mc'
                },
                {
                    id: 'p9',
                    question: 'Maria has 15 cards with letters: 3 As, 4 Bs, 5 Cs, and 3 Ds. What is P(picking a C)?',
                    options: ['1/5', '5/15', '1/3', '5/10'],
                    answer: '5/15',
                    type: 'mc'
                },
                {
                    id: 'p10',
                    question: 'Maria has 15 cards with letters: 3 As, 4 Bs, 5 Cs, and 3 Ds. What is P(picking an A or a D)?',
                    options: ['3/15', '6/15', '1/5', '9/15'],
                    answer: '6/15',
                    type: 'mc'
                },
                {
                    id: 'p11',
                    question: 'A box has 5 red and 7 blue pens. More red pens are added so P(red) = 1/2. How many red pens were added?',
                    options: ['2', '5', '7', '12'],
                    answer: '2',
                    type: 'mc'
                },
                {
                    id: 'p12',
                    question: 'If P(event) = 0.65, what is P(not event)?',
                    options: ['0.65', '0.35', '1.65', '0'],
                    answer: '0.35',
                    type: 'mc'
                }
            ]
        };

        let userAnswers = {};
        let submitted = false;

        function renderQuestions() {
            // Render each section
            renderSection('section-measures', questions.measures);
            renderSection('section-area', questions.area);
            renderSection('section-sequences', questions.sequences);
            renderSection('section-coordinates', questions.coordinates);
            renderSection('section-probability', questions.probability);
        }

        function renderSection(containerId, sectionQuestions) {
            const container = document.getElementById(containerId);
            let html = '';

            sectionQuestions.forEach((q, index) => {
                html += `<div class="question" id="question-${q.id}">`;
                html += `<div class="question-header">`;
                html += `<div class="question-number">${index + 1}</div>`;
                html += `<div class="question-text">${q.question}</div>`;
                html += `</div>`;

                if (q.type === 'input') {
                    html += `<div class="input-answer">`;
                    html += `<input type="text" id="input-${q.id}" onchange="saveAnswer('${q.id}', this.value)">`;
                    if (q.unit) {
                        html += `<span>${q.unit}</span>`;
                    }
                    html += `</div>`;
                } else if (q.type === 'mc') {
                    html += `<div class="options">`;
                    q.options.forEach((option, optIndex) => {
                        html += `<div class="option" id="option-${q.id}-${optIndex}" onclick="selectOption('${q.id}', '${option.replace(/'/g, "\\'")}', ${optIndex})">`;
                        html += `<input type="radio" name="${q.id}" id="radio-${q.id}-${optIndex}">`;
                        html += `<label>${option}</label>`;
                        html += `</div>`;
                    });
                    html += `</div>`;
                }

                html += `<div class="feedback" id="feedback-${q.id}"></div>`;
                html += `</div>`;
            });

            container.innerHTML = html;
        }

        function saveAnswer(questionId, value) {
            userAnswers[questionId] = value.trim();
        }

        function selectOption(questionId, value, optIndex) {
            if (submitted) return;

            userAnswers[questionId] = value;

            // Update visual selection
            const allOptions = document.querySelectorAll(`[id^="option-${questionId}-"]`);
            allOptions.forEach(opt => opt.classList.remove('selected'));
            document.getElementById(`option-${questionId}-${optIndex}`).classList.add('selected');
            document.getElementById(`radio-${questionId}-${optIndex}`).checked = true;
        }

        function getAllQuestions() {
            return [
                ...questions.measures,
                ...questions.area,
                ...questions.sequences,
                ...questions.coordinates,
                ...questions.probability
            ];
        }

        function submitTest() {
            submitted = true;
            const allQuestions = getAllQuestions();
            let totalCorrect = 0;
            const sectionScores = {
                measures: { correct: 0, total: questions.measures.length },
                area: { correct: 0, total: questions.area.length },
                sequences: { correct: 0, total: questions.sequences.length },
                coordinates: { correct: 0, total: questions.coordinates.length },
                probability: { correct: 0, total: questions.probability.length }
            };

            allQuestions.forEach(q => {
                const userAnswer = userAnswers[q.id] || '';
                const isCorrect = userAnswer.toLowerCase() === q.answer.toLowerCase();

                const feedbackEl = document.getElementById(`feedback-${q.id}`);

                if (q.type === 'input') {
                    const inputEl = document.getElementById(`input-${q.id}`);
                    if (isCorrect) {
                        inputEl.classList.add('correct');
                        feedbackEl.textContent = 'Correct!';
                        feedbackEl.className = 'feedback show correct';
                    } else {
                        inputEl.classList.add('incorrect');
                        feedbackEl.textContent = `Incorrect. The answer is ${q.answer}`;
                        feedbackEl.className = 'feedback show incorrect';
                    }
                } else if (q.type === 'mc') {
                    q.options.forEach((option, optIndex) => {
                        const optionEl = document.getElementById(`option-${q.id}-${optIndex}`);
                        if (option === q.answer) {
                            optionEl.classList.add('correct');
                        } else if (option === userAnswer && !isCorrect) {
                            optionEl.classList.add('incorrect');
                        }
                    });

                    if (isCorrect) {
                        feedbackEl.textContent = 'Correct!';
                        feedbackEl.className = 'feedback show correct';
                    } else {
                        feedbackEl.textContent = `Incorrect. The answer is ${q.answer}`;
                        feedbackEl.className = 'feedback show incorrect';
                    }
                }

                if (isCorrect) {
                    totalCorrect++;
                    // Update section scores
                    if (questions.measures.includes(q)) sectionScores.measures.correct++;
                    else if (questions.area.includes(q)) sectionScores.area.correct++;
                    else if (questions.sequences.includes(q)) sectionScores.sequences.correct++;
                    else if (questions.coordinates.includes(q)) sectionScores.coordinates.correct++;
                    else if (questions.probability.includes(q)) sectionScores.probability.correct++;
                }
            });

            // Display results
            const totalQuestions = allQuestions.length;
            const percentage = Math.round((totalCorrect / totalQuestions) * 100);

            document.getElementById('score-display').textContent = `${totalCorrect} / ${totalQuestions}`;
            document.getElementById('progress-fill').style.width = `${percentage}%`;

            let message = '';
            if (percentage >= 90) message = 'Excellent! Outstanding performance!';
            else if (percentage >= 75) message = 'Great job! Well done!';
            else if (percentage >= 50) message = 'Good effort! Keep practicing!';
            else message = 'Keep working hard! Review the topics and try again.';

            document.getElementById('feedback-message').textContent = message;

            // Section breakdown
            const breakdownHtml = `
                <div class="score-item">
                    <div class="score-item-value">${sectionScores.measures.correct}/${sectionScores.measures.total}</div>
                    <div class="score-item-label">Measures</div>
                </div>
                <div class="score-item">
                    <div class="score-item-value">${sectionScores.area.correct}/${sectionScores.area.total}</div>
                    <div class="score-item-label">Area & Perimeter</div>
                </div>
                <div class="score-item">
                    <div class="score-item-value">${sectionScores.sequences.correct}/${sectionScores.sequences.total}</div>
                    <div class="score-item-label">Sequences</div>
                </div>
                <div class="score-item">
                    <div class="score-item-value">${sectionScores.coordinates.correct}/${sectionScores.coordinates.total}</div>
                    <div class="score-item-label">Coordinates</div>
                </div>
                <div class="score-item">
                    <div class="score-item-value">${sectionScores.probability.correct}/${sectionScores.probability.total}</div>
                    <div class="score-item-label">Probability</div>
                </div>
            `;
            document.getElementById('score-breakdown').innerHTML = breakdownHtml;

            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function resetTest() {
            submitted = false;
            userAnswers = {};

            // Reset all inputs and options
            document.querySelectorAll('input[type="text"]').forEach(input => {
                input.value = '';
                input.classList.remove('correct', 'incorrect');
            });

            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });

            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });

            document.querySelectorAll('.feedback').forEach(feedback => {
                feedback.classList.remove('show', 'correct', 'incorrect');
            });

            document.getElementById('results').classList.remove('show');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        renderQuestions();
    </script>
</body>
</html>
