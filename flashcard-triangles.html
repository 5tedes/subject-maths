import React, { useState } from 'react';
import { ChevronLeft, ChevronRight, RotateCcw } from 'lucide-react';

const FlashcardApp = () => {
  const styles = `
    .flip-card {
      perspective: 1000px;
    }
    .flip-card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flip-card-inner.flipped {
      transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }
    .flip-card-back {
      transform: rotateY(180deg);
    }
  `;
  
  const flashcards = [
    // Triangles
    {
      category: "Triangles",
      question: "What are the three types of triangles classified by sides?",
      answer: "Equilateral (all sides equal), Isosceles (two sides equal), and Scalene (no sides equal)"
    },
    {
      category: "Triangles",
      question: "What is an equilateral triangle?",
      answer: "A triangle with all three sides equal in length and all three angles equal to 60°"
    },
    {
      category: "Triangles",
      question: "What is an isosceles triangle?",
      answer: "A triangle with two sides of equal length and two equal angles"
    },
    {
      category: "Triangles",
      question: "What is a scalene triangle?",
      answer: "A triangle with all three sides of different lengths and all three angles different"
    },
    {
      category: "Triangles",
      question: "What are the three types of triangles classified by angles?",
      answer: "Acute (all angles < 90°), Right (one angle = 90°), and Obtuse (one angle > 90°)"
    },
    {
      category: "Triangles",
      question: "What is the sum of all interior angles in ANY triangle?",
      answer: "180 degrees"
    },
    {
      category: "Triangles",
      question: "What is a right-angled triangle?",
      answer: "A triangle that has one angle exactly equal to 90 degrees"
    },
    {
      category: "Triangles",
      question: "What is an acute triangle?",
      answer: "A triangle where all three angles are less than 90 degrees"
    },
    {
      category: "Triangles",
      question: "What is an obtuse triangle?",
      answer: "A triangle that has one angle greater than 90 degrees"
    },
    {
      category: "Triangles",
      question: "In an isosceles triangle, if one angle is 40°, what could the other angles be?",
      answer: "Either 40° and 100°, or 70° and 70° (depending on which angles are equal)"
    },
    
    // Working with Angles
    {
      category: "Angles",
      question: "What is an acute angle?",
      answer: "An angle that measures less than 90 degrees"
    },
    {
      category: "Angles",
      question: "What is a right angle?",
      answer: "An angle that measures exactly 90 degrees"
    },
    {
      category: "Angles",
      question: "What is an obtuse angle?",
      answer: "An angle that measures more than 90 degrees but less than 180 degrees"
    },
    {
      category: "Angles",
      question: "What is a straight angle?",
      answer: "An angle that measures exactly 180 degrees (forms a straight line)"
    },
    {
      category: "Angles",
      question: "What is a reflex angle?",
      answer: "An angle that measures more than 180 degrees but less than 360 degrees"
    },
    {
      category: "Angles",
      question: "What are complementary angles?",
      answer: "Two angles that add up to 90 degrees"
    },
    {
      category: "Angles",
      question: "What are supplementary angles?",
      answer: "Two angles that add up to 180 degrees"
    },
    {
      category: "Angles",
      question: "What are vertically opposite angles?",
      answer: "When two lines intersect, the angles opposite each other are equal"
    },
    {
      category: "Angles",
      question: "What are angles on a straight line?",
      answer: "Angles that lie on a straight line and add up to 180 degrees"
    },
    {
      category: "Angles",
      question: "What are angles around a point?",
      answer: "Angles that meet at a point and add up to 360 degrees"
    },
    {
      category: "Angles",
      question: "If two complementary angles are equal, what is the measure of each angle?",
      answer: "45 degrees (since 45° + 45° = 90°)"
    },
    {
      category: "Angles",
      question: "If two supplementary angles are equal, what is the measure of each angle?",
      answer: "90 degrees (since 90° + 90° = 180°)"
    }
  ];

  const [currentIndex, setCurrentIndex] = useState(0);
  const [isFlipped, setIsFlipped] = useState(false);
  const [filter, setFilter] = useState('All');

  const filteredCards = filter === 'All' 
    ? flashcards 
    : flashcards.filter(card => card.category === filter);

  const handleNext = () => {
    setIsFlipped(false);
    setCurrentIndex((prev) => (prev + 1) % filteredCards.length);
  };

  const handlePrevious = () => {
    setIsFlipped(false);
    setCurrentIndex((prev) => (prev - 1 + filteredCards.length) % filteredCards.length);
  };

  const handleFlip = () => {
    setIsFlipped(!isFlipped);
  };

  const handleReset = () => {
    setCurrentIndex(0);
    setIsFlipped(false);
  };

  const currentCard = filteredCards[currentIndex];

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8">
      <style>{styles}</style>
      <div className="max-w-2xl mx-auto">
        <h1 className="text-4xl font-bold text-center text-indigo-900 mb-2">
          Year 1 Maths Flashcards
        </h1>
        <p className="text-center text-indigo-600 mb-8">Triangles & Angles</p>

        {/* Filter Buttons */}
        <div className="flex justify-center gap-4 mb-6">
          <button
            onClick={() => { setFilter('All'); setCurrentIndex(0); setIsFlipped(false); }}
            className={`px-6 py-2 rounded-full font-semibold transition ${
              filter === 'All'
                ? 'bg-indigo-600 text-white'
                : 'bg-white text-indigo-600 hover:bg-indigo-50'
            }`}
          >
            All ({flashcards.length})
          </button>
          <button
            onClick={() => { setFilter('Triangles'); setCurrentIndex(0); setIsFlipped(false); }}
            className={`px-6 py-2 rounded-full font-semibold transition ${
              filter === 'Triangles'
                ? 'bg-indigo-600 text-white'
                : 'bg-white text-indigo-600 hover:bg-indigo-50'
            }`}
          >
            Triangles ({flashcards.filter(c => c.category === 'Triangles').length})
          </button>
          <button
            onClick={() => { setFilter('Angles'); setCurrentIndex(0); setIsFlipped(false); }}
            className={`px-6 py-2 rounded-full font-semibold transition ${
              filter === 'Angles'
                ? 'bg-indigo-600 text-white'
                : 'bg-white text-indigo-600 hover:bg-indigo-50'
            }`}
          >
            Angles ({flashcards.filter(c => c.category === 'Angles').length})
          </button>
        </div>

        {/* Flashcard */}
        <div className="flip-card mb-6" style={{ height: '320px' }}>
          <div
            onClick={handleFlip}
            className={`flip-card-inner cursor-pointer ${isFlipped ? 'flipped' : ''}`}
          >
            {/* Front */}
            <div className="flip-card-front bg-white rounded-2xl shadow-2xl p-8 flex flex-col justify-between">
              <div>
                <span className="inline-block px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-semibold mb-4">
                  {currentCard.category}
                </span>
                <h2 className="text-2xl font-bold text-gray-800 mt-4">
                  {currentCard.question}
                </h2>
              </div>
              <p className="text-center text-gray-500 text-sm">Click to reveal answer</p>
            </div>

            {/* Back */}
            <div className="flip-card-back bg-indigo-600 rounded-2xl shadow-2xl p-8 flex flex-col justify-between">
              <div>
                <span className="inline-block px-4 py-1 bg-indigo-500 text-white rounded-full text-sm font-semibold mb-4">
                  Answer
                </span>
                <p className="text-xl text-white mt-4 leading-relaxed">
                  {currentCard.answer}
                </p>
              </div>
              <p className="text-center text-indigo-200 text-sm">Click to see question</p>
            </div>
          </div>
        </div>

        {/* Controls */}
        <div className="flex justify-center items-center gap-4">
          <button
            onClick={handlePrevious}
            className="p-3 bg-white rounded-full shadow-lg hover:bg-gray-50 transition"
            aria-label="Previous card"
          >
            <ChevronLeft className="w-6 h-6 text-indigo-600" />
          </button>

          <div className="bg-white px-6 py-3 rounded-full shadow-lg">
            <span className="text-indigo-900 font-semibold">
              {currentIndex + 1} / {filteredCards.length}
            </span>
          </div>

          <button
            onClick={handleNext}
            className="p-3 bg-white rounded-full shadow-lg hover:bg-gray-50 transition"
            aria-label="Next card"
          >
            <ChevronRight className="w-6 h-6 text-indigo-600" />
          </button>

          <button
            onClick={handleReset}
            className="p-3 bg-white rounded-full shadow-lg hover:bg-gray-50 transition"
            aria-label="Reset to first card"
          >
            <RotateCcw className="w-6 h-6 text-indigo-600" />
          </button>
        </div>

        {/* Keyboard hints */}
        <p className="text-center text-indigo-600 text-sm mt-6">
          Tip: Click the card to flip it, or use the navigation buttons
        </p>
      </div>
    </div>
  );
};

export default FlashcardApp;
